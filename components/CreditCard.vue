<template>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 0 277 149"
  >
    <defs>
      <linearGradient
        id="linear-gradient"
        x1="0.148"
        y1="0.157"
        x2="0.826"
        y2="0.76"
        gradientUnits="objectBoundingBox"
      >
        <stop offset="0" stop-color="#4b4a5f" />
        <stop offset="1" stop-color="#31303c" />
      </linearGradient>
      <clipPath id="clip-path">
        <path
          id="Path_273"
          data-name="Path 273"
          d="M8,0H269a8,8,0,0,1,8,8V141a8,8,0,0,1-8,8H8a8,8,0,0,1-8-8V8A8,8,0,0,1,8,0Z"
          transform="translate(2224 -462)"
          fill="#414155"
          opacity="0"
        />
      </clipPath>
      <pattern
        id="pattern"
        preserveAspectRatio="none"
        width="100%"
        height="100%"
        viewBox="0 0 739 476"
      >
        <transition @enter="imageEnter" @leave="imageLeave">
          <image
            :key="bank.key"
            width="739"
            height="476"
            :xlink:href="bank.img"
          />
        </transition>
      </pattern>
    </defs>
    <g id="Group_190" data-name="Group 190" transform="translate(-2849 306)">
      <rect
        id="Rectangle_676"
        data-name="Rectangle 676"
        width="277"
        height="149"
        rx="8"
        transform="translate(2849 -306)"
        fill="url(#linear-gradient)"
      />
      <g
        id="Mask_Group_8"
        data-name="Mask Group 8"
        transform="translate(625 156)"
        clip-path="url(#clip-path)"
      >
        <g
          id="Path_274"
          data-name="Path 274"
          transform="translate(2389 -500)"
          fill="rgba(245,247,255,0.06)"
        >
          <path
            d="M 104 207.5 C 96.97734069824219 207.5 89.95921325683594 206.7925262451172 83.14060211181641 205.3972320556641 C 76.49555206298828 204.0374755859375 69.95926666259766 202.0084686279297 63.71329116821289 199.3666534423828 C 57.58060455322266 196.7727661132812 51.66558074951172 193.5621795654297 46.13252639770508 189.8241271972656 C 40.65189361572266 186.1215057373047 35.4981575012207 181.8692626953125 30.8144474029541 177.185546875 C 26.1307373046875 172.5018463134766 21.87849998474121 167.3480987548828 18.17586898803711 161.8674774169922 C 14.43781566619873 156.3344268798828 11.2272367477417 150.4193878173828 8.633341789245605 144.2867126464844 C 5.991526126861572 138.0407409667969 3.962526321411133 131.5044403076172 2.602763175964355 124.8593978881836 C 1.207473635673523 118.0407867431641 0.5 111.0226593017578 0.5 104 C 0.5 96.97734069824219 1.207473635673523 89.95921325683594 2.602763175964355 83.14060211181641 C 3.962526321411133 76.49555206298828 5.991526126861572 69.95926666259766 8.633341789245605 63.71329116821289 C 11.2272367477417 57.58060455322266 14.43781566619873 51.66558074951172 18.17586898803711 46.13252639770508 C 21.87849998474121 40.65189361572266 26.1307373046875 35.4981575012207 30.8144474029541 30.8144474029541 C 35.4981575012207 26.1307373046875 40.65189361572266 21.87849998474121 46.13252639770508 18.17586898803711 C 51.66558074951172 14.43781566619873 57.58060455322266 11.2272367477417 63.71329116821289 8.633341789245605 C 69.95926666259766 5.991526126861572 76.49555206298828 3.962526321411133 83.14060211181641 2.602763175964355 C 89.95921325683594 1.207473635673523 96.97734069824219 0.5 104 0.5 C 111.0226593017578 0.5 118.0407867431641 1.207473635673523 124.8593978881836 2.602763175964355 C 131.5044403076172 3.962526321411133 138.0407409667969 5.991526126861572 144.2867126464844 8.633341789245605 C 150.4193878173828 11.2272367477417 156.3344268798828 14.43781566619873 161.8674774169922 18.17586898803711 C 167.3480987548828 21.87849998474121 172.5018463134766 26.1307373046875 177.185546875 30.8144474029541 C 181.8692626953125 35.4981575012207 186.1215057373047 40.65189361572266 189.8241271972656 46.13252639770508 C 193.5621795654297 51.66558074951172 196.7727661132812 57.58060455322266 199.3666534423828 63.71329116821289 C 202.0084686279297 69.95926666259766 204.0374755859375 76.49555206298828 205.3972320556641 83.14060211181641 C 206.7925262451172 89.95921325683594 207.5 96.97734069824219 207.5 104 C 207.5 111.0226593017578 206.7925262451172 118.0407867431641 205.3972320556641 124.8593978881836 C 204.0374755859375 131.5044403076172 202.0084686279297 138.0407409667969 199.3666534423828 144.2867126464844 C 196.7727661132812 150.4193878173828 193.5621795654297 156.3344268798828 189.8241271972656 161.8674774169922 C 186.1215057373047 167.3480987548828 181.8692626953125 172.5018463134766 177.185546875 177.185546875 C 172.5018463134766 181.8692626953125 167.3480987548828 186.1215057373047 161.8674774169922 189.8241271972656 C 156.3344268798828 193.5621795654297 150.4193878173828 196.7727661132812 144.2867126464844 199.3666534423828 C 138.0407409667969 202.0084686279297 131.5044403076172 204.0374755859375 124.8593978881836 205.3972320556641 C 118.0407867431641 206.7925262451172 111.0226593017578 207.5 104 207.5 Z"
            stroke="none"
          />
          <transition @enter="secondCircleEnter" @leave="secondCircleLeave">
            <path
              :key="bank.color"
              d="M 104 1 C 97.01091766357422 1 90.02655029296875 1.704055786132812 83.2408447265625 3.092605590820312 C 76.62812805175781 4.445770263671875 70.12362670898438 6.464874267578125 63.90805053710938 9.093841552734375 C 57.80509948730469 11.67518615722656 51.91871643066406 14.87020874023438 46.41241455078125 18.59017944335938 C 40.95819091796875 22.27499389648438 35.82920837402344 26.50679016113281 31.16799926757812 31.16799926757812 C 26.50679016113281 35.82920837402344 22.27499389648438 40.95819091796875 18.59017944335938 46.41241455078125 C 14.87020874023438 51.91871643066406 11.67518615722656 57.80509948730469 9.093841552734375 63.90805053710938 C 6.464874267578125 70.12362670898438 4.445770263671875 76.62812805175781 3.092605590820312 83.2408447265625 C 1.704055786132812 90.02655029296875 1 97.01091766357422 1 104 C 1 110.9890823364258 1.704055786132812 117.9734497070312 3.092605590820312 124.7591552734375 C 4.445770263671875 131.3718719482422 6.464874267578125 137.8763732910156 9.093841552734375 144.0919494628906 C 11.67518615722656 150.1948852539062 14.87020874023438 156.081298828125 18.59017944335938 161.5875854492188 C 22.27499389648438 167.0418090820312 26.50679016113281 172.1707916259766 31.16799926757812 176.8320007324219 C 35.82920837402344 181.4932098388672 40.95819091796875 185.7250061035156 46.41241455078125 189.4098205566406 C 51.91871643066406 193.1297912597656 57.80509948730469 196.3248138427734 63.90805053710938 198.9061584472656 C 70.12362670898438 201.5351257324219 76.62812805175781 203.5542297363281 83.2408447265625 204.9073944091797 C 90.02655029296875 206.2959442138672 97.01091766357422 207 104 207 C 110.9890823364258 207 117.9734497070312 206.2959442138672 124.7591552734375 204.9073944091797 C 131.3718719482422 203.5542297363281 137.8763732910156 201.5351257324219 144.0919494628906 198.9061584472656 C 150.1948852539062 196.3248138427734 156.081298828125 193.1297912597656 161.5875854492188 189.4098205566406 C 167.0418090820312 185.7250061035156 172.1707916259766 181.4932098388672 176.8320007324219 176.8320007324219 C 181.4932098388672 172.1707916259766 185.7250061035156 167.0418090820312 189.4098205566406 161.5875854492188 C 193.1297912597656 156.081298828125 196.3248138427734 150.1948852539062 198.9061584472656 144.0919494628906 C 201.5351257324219 137.8763732910156 203.5542297363281 131.3718719482422 204.9073944091797 124.7591552734375 C 206.2959442138672 117.9734497070312 207 110.9890823364258 207 104 C 207 97.01091766357422 206.2959442138672 90.02655029296875 204.9073944091797 83.2408447265625 C 203.5542297363281 76.62812805175781 201.5351257324219 70.12362670898438 198.9061584472656 63.90805053710938 C 196.3248138427734 57.80509948730469 193.1297912597656 51.91871643066406 189.4098205566406 46.41241455078125 C 185.7250061035156 40.95819091796875 181.4932098388672 35.82920837402344 176.8320007324219 31.16799926757812 C 172.1707916259766 26.50679016113281 167.0418090820312 22.27499389648438 161.5875854492188 18.59017944335938 C 156.081298828125 14.87020874023438 150.1948852539062 11.67518615722656 144.0919494628906 9.093841552734375 C 137.8763732910156 6.464874267578125 131.3718719482422 4.445770263671875 124.7591552734375 3.092605590820312 C 117.9734497070312 1.704055786132812 110.9890823364258 1 104 1 M 104 0 C 161.4376068115234 0 208 46.56239318847656 208 104 C 208 161.4376068115234 161.4376068115234 208 104 208 C 46.56239318847656 208 0 161.4376068115234 0 104 C 0 46.56239318847656 46.56239318847656 0 104 0 Z"
              stroke="none"
              :fill="bank.color"
            />
          </transition>
        </g>

        <transition @enter="firstCircleEnter" @leave="firstCircleLeave">
          <g
            :key="bank.color"
            transform="translate(2167 -612)"
            fill="none"
            :stroke="bank.color"
            stroke-width="1"
          >
            <circle cx="104" cy="104" r="104" stroke="none" />
            <circle cx="104" cy="104" r="103.5" fill="none" />
          </g>
        </transition>
      </g>
      <transition-group
        tag="text"
        transform="translate(2867 -242)"
        fill="#fff"
        font-size="16"
        font-family="Inter-SemiBold, Inter"
        font-weight="600"
        @enter="letterEnter"
        @leave="letterLeave"
      >
        <tspan v-for="(letter, i) in formattedBankAccount" :key="letter + i" xml:space="preserve" y="16">{{ letter }}</tspan>
      </transition-group>

      <transition @enter="bankEnter" @leave="bankLeave">
        <text
          :key="bank.key"
          transform="translate(2867 -195)"
          fill="#fff"
          font-size="14"
          font-family="Inter-Regular, Inter"
        >
          <tspan v-for="(letter,i) in bank.name" :key="i" y="14">{{ letter }}</tspan>
        </text>
      </transition>
      <g
        id="Group_186"
        data-name="Group 186"
        transform="translate(2861.664 -301.87)"
        opacity="0.951"
      >
        <g id="Group_179" data-name="Group 179" transform="translate(5 14)">
          <path
            id="Path_248"
            data-name="Path 248"
            d="M219.184,3111.782H224.5v-5.029l-5.318.005Zm-3.038,1.533,0-8.092V3099h-6.583v19.865h12.159a2.792,2.792,0,0,0,2.776-2.8l0-1.227-6.833,0A1.519,1.519,0,0,1,216.145,3113.315ZM200,3101.787v1.909h6.517l0-4.691h-3.737A2.787,2.787,0,0,0,200,3101.787Zm24.492,1.909,0-1.907a2.8,2.8,0,0,0-2.78-2.789h-2.538l0,4.7ZM200,3116.072a2.8,2.8,0,0,0,2.785,2.8h3.732v-4.025H200Zm0-4.29h6.517v-5.024H200Z"
            transform="translate(-200 -3099)"
            fill="#fff"
            fill-rule="evenodd"
          />
        </g>
      </g>
      <rect
        id="ing-lionOrange"
        width="46"
        height="30"
        transform="translate(3064 -203)"
        fill="url(#pattern)"
      />
    </g>
  </svg>
</template>

<script>
import { gsap } from 'gsap'
export default {
  props: {
    bank: {
      type: Object,
      default: () => ({})
    },
    account: {
      type: String,
      default: ''
    }
  },

  computed: {
    formattedBankAccount () {
      return (this.account.split(' ').join('').match(/.{1,4}/g) || []).join('   ')
    }
  },

  methods: {
    firstCircleEnter (el, done) {
      gsap
        .timeline({ onComplete: done })
        .from(el, {
          autoAlpha: 0,
          scale: 0,
          duration: 0.6,
          ease: 'back.inOut'
        })
    },

    firstCircleLeave (el, done) {
      gsap
        .timeline({ onComplete: done })
        .to(el, {
          autoAlpha: 0,
          scale: 1.1,
          duration: 0.3,
          ease: 'power3.inOut'
        })
    },

    secondCircleEnter (el, done) {
      gsap
        .timeline({ onComplete: done })
        .from(el, {
          autoAlpha: 0,
          transformOrigin: 'center',
          scale: 0.2,
          duration: 0.6,
          ease: 'back.inOut'
        })
    },

    secondCircleLeave (el, done) {
      gsap
        .timeline({ onComplete: done })
        .to(el, {
          autoAlpha: 0,
          transformOrigin: 'center',
          scale: 1.3,
          duration: 0.3,
          ease: 'power3.inOut'
        })
    },

    imageEnter (el, done) {
      gsap
        .timeline({ onComplete: done })
        .from(el, {
          transformOrigin: 'center',
          autoAlpha: 0,
          scale: 0.6,
          duration: 0.3,
          ease: 'power3.inOut'
        })
    },

    imageLeave (el, done) {
      gsap
        .timeline({ onComplete: done })
        .to(el, {
          transformOrigin: 'center',
          autoAlpha: 0,
          scale: 1.5,
          duration: 0.3,
          ease: 'power3.inOut'
        })
    },

    letterEnter (el, done) {
      gsap
        .timeline({ onComplete: done })
        .from(el, {
          autoAlpha: 0,
          attr: { y: '-=10' },
          duration: 0.4,
          ease: 'back.inOut(2)'
        })
    },

    letterLeave (el, done) {
      gsap
        .timeline({ onComplete: done })
        .to(el, {
          autoAlpha: 0,
          attr: { y: '+=10' },
          duration: 0.4,
          ease: 'back.inOut(2)'
        })
    },

    bankEnter (el, done) {
      gsap
        .timeline({ onComplete: done })
        .from(el.childNodes, {
          autoAlpha: 0,
          attr: { y: '+=10' },
          duration: 0.3,
          ease: 'back.inOut',
          stagger: 0.02
        })
        .set(el.childNodes, { clearProps: true })
    },

    bankLeave (el, done) {
      gsap
        .timeline({ onComplete: done })
        .to(el.childNodes, {
          autoAlpha: 0,
          attr: { y: '-=10' },
          duration: 0.3,
          ease: 'back.inOut',
          stagger: 0.02
        })
        .set(el.childNodes, { clearProps: true })
    }
  }
}
</script>
